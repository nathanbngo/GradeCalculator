<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Grade Calculator</h1>
        <div id="courses">
            <h2>Assignments</h2>
            <div class="course-input">
                <div>
                    <label for="title-0">Assignment/Test Name</label>
                    <input type="text" id="title-0" placeholder="Optional">
                </div>
                <div>
                    <label for="mark-0">Mark</label>
                    <input type="number" id="mark-0">
                </div>
                <div>
                    <label for="weight-0">Weight</label>
                    <input type="number" id="weight-0">
                </div>
            </div>
        </div>
        <button onclick="addCourse()">Add Course</button>
        
        <hr class="divider">
    
        <div class="result">
            <h2>Final Goal</h2>
            <div class="course-input">
                <div>
                    <label for="desired-mark">Desired Final Mark</label>
                    <input type="number" id="desired-mark">
                </div>
                <div>
                    <label for="final-weight">Final Exam Weight</label>
                    <input type="number" id="final-weight">
                </div>
            </div>
            <button onclick="calculateNeededMark()">Calculate Needed Final Mark</button>
            <p id="output"></p>
        </div>
    </div>

    <div class="simple-container">
        <h1>Simple Final Grade Calculator</h1>
        <div class="course-input">
            <div>
                <label for="current-grade">Current Grade</label>
                <input type="number" id="current-grade">
            </div>
            <div>
                <label for="target-grade">Target Grade</label>
                <input type="number" id="target-grade">
            </div>
            <div>
                <label for="final-worth">Final Weight (%)</label>
                <input type="number" id="final-worth">
            </div>
        </div>
        <button onclick="calculateSimpleFinalMark()">Calculate Final Mark</button>
        <p id="simple-output"></p>
    </div>

    <footer>
        <p>Created by Nathan Ngo</p>
    </footer>

    <script>
        let courseCount = 1;

        function addCourse() {
            const coursesDiv = document.getElementById('courses');
            const courseDiv = document.createElement('div');
            courseDiv.classList.add('course-input');
            courseDiv.innerHTML = `
                <div>
                    <label for="title-${courseCount}">Course Title (Optional)</label>
                    <input type="text" id="title-${courseCount}" placeholder="Optional">
                </div>
                <div>
                    <label for="mark-${courseCount}">Mark</label>
                    <input type="number" id="mark-${courseCount}">
                </div>
                <div>
                    <label for="weight-${courseCount}">Weight</label>
                    <input type="number" id="weight-${courseCount}">
                </div>
            `;
            coursesDiv.appendChild(courseDiv);
            courseCount++;
        }

        function calculateNeededMark() {
            const marks = document.querySelectorAll('.mark');
            const weights = document.querySelectorAll('.weight');

            let currentWeightedTotal = 0;
            let totalWeightSoFar = 0;

            for (let i = 0; i < courseCount; i++) {
                const mark = parseFloat(marks[i]?.value) || 0;
                const weight = parseFloat(weights[i]?.value) || 0;

                currentWeightedTotal += mark * weight;
                totalWeightSoFar += weight;
            }

            const desiredMark = parseFloat(document.getElementById('desired-mark').value) || 0;
            const finalWeight = parseFloat(document.getElementById('final-weight').value) || 0;

            const neededMark = ((desiredMark * (totalWeightSoFar + finalWeight) - currentWeightedTotal) / finalWeight);

            let message = '';
            if (neededMark <= 0) {
                message = `You need -${Math.abs(neededMark.toFixed(2))}% on the final. Do you even need to go? ðŸ˜‚`;
            } else if (neededMark > 100) {
                message = `You need ${neededMark.toFixed(2)}% on the final. Is that even possible? ðŸ˜…`;
            } else {
                message = `Great job so far! You need ${neededMark.toFixed(2)}% on the final to achieve your goal. Keep it up! ðŸ’ª`;
            }

            document.getElementById('output').textContent = message;
        }

        function calculateSimpleFinalMark() {
            const currentGrade = parseFloat(document.getElementById('current-grade').value) || 0;
            const targetGrade = parseFloat(document.getElementById('target-grade').value) || 0;
            const finalWeight = parseFloat(document.getElementById('final-worth').value) || 0;

            const neededMark = ((targetGrade - (currentGrade * (1 - (finalWeight / 100)))) / (finalWeight / 100));

            let message = '';
            if (neededMark <= 0) {
                message = `You need -${Math.abs(neededMark.toFixed(2))}%. Do you even need to show up? ðŸ˜‚`;
            } else if (neededMark > 100) {
                message = `You need ${neededMark.toFixed(2)}%. Is that even doable? ðŸ˜…`;
            } else {
                message = `You need ${neededMark.toFixed(2)}% on the final to hit your target. Stay confident and go for it! ðŸŒŸ`;
            }

            document.getElementById('simple-output').textContent = message;
        }
    </script>
</body>
</html>
